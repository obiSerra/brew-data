;; gorilla-repl.fileformat = 1

;; **
;;; # Brew data poking
;;; 
;;; Shift + enter evaluates code. Hit ctrl+g twice in quick succession or click the menu icon (upper-right corner) for more commands ...
;;; 
;;; ## Goals
;;; 1. Explore data to find usefull information for brewing an (American IPA)
;;; 
;;; ### Note
;;; 
;;; data should be used after considering this analysis:
;;; 
;;; From https://www.kaggle.com/samlac79/beer-recipe-exploratory-analysis
;;; 
;;; 
;;; Interesting colums: ....
;;; 
;;; 
;;; 
;;; ### TODO
;;; 
;;; 1. adjust both OG and FG using the SugarScale column as pointed out in https://www.kaggle.com/samlac79/beer-recipe-exploratory-analysis/comments
;; **

;; @@
(ns brew-data.poking
  (:require [brew-data.analysis :as an]
            [gorilla-plot.core :as plot]
            [gorilla-repl.table :as t]
            [clojure.data.csv :as csv]
            [clojure.java.io :as io]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def sample (an/take-sample 1001))
(def headers (first sample))
(def sample-record (rest sample))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;brew-data.poking/sample-record</span>","value":"#'brew-data.poking/sample-record"}
;; <=

;; @@
(t/table-view (take 10 sample))
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;BeerID&quot;</span>","value":"\"BeerID\""},{"type":"html","content":"<span class='clj-string'>&quot;Name&quot;</span>","value":"\"Name\""},{"type":"html","content":"<span class='clj-string'>&quot;URL&quot;</span>","value":"\"URL\""},{"type":"html","content":"<span class='clj-string'>&quot;Style&quot;</span>","value":"\"Style\""},{"type":"html","content":"<span class='clj-string'>&quot;StyleID&quot;</span>","value":"\"StyleID\""},{"type":"html","content":"<span class='clj-string'>&quot;Size(L)&quot;</span>","value":"\"Size(L)\""},{"type":"html","content":"<span class='clj-string'>&quot;OG&quot;</span>","value":"\"OG\""},{"type":"html","content":"<span class='clj-string'>&quot;FG&quot;</span>","value":"\"FG\""},{"type":"html","content":"<span class='clj-string'>&quot;ABV&quot;</span>","value":"\"ABV\""},{"type":"html","content":"<span class='clj-string'>&quot;IBU&quot;</span>","value":"\"IBU\""},{"type":"html","content":"<span class='clj-string'>&quot;Color&quot;</span>","value":"\"Color\""},{"type":"html","content":"<span class='clj-string'>&quot;BoilSize&quot;</span>","value":"\"BoilSize\""},{"type":"html","content":"<span class='clj-string'>&quot;BoilTime&quot;</span>","value":"\"BoilTime\""},{"type":"html","content":"<span class='clj-string'>&quot;BoilGravity&quot;</span>","value":"\"BoilGravity\""},{"type":"html","content":"<span class='clj-string'>&quot;Efficiency&quot;</span>","value":"\"Efficiency\""},{"type":"html","content":"<span class='clj-string'>&quot;MashThickness&quot;</span>","value":"\"MashThickness\""},{"type":"html","content":"<span class='clj-string'>&quot;SugarScale&quot;</span>","value":"\"SugarScale\""},{"type":"html","content":"<span class='clj-string'>&quot;BrewMethod&quot;</span>","value":"\"BrewMethod\""},{"type":"html","content":"<span class='clj-string'>&quot;PitchRate&quot;</span>","value":"\"PitchRate\""},{"type":"html","content":"<span class='clj-string'>&quot;PrimaryTemp&quot;</span>","value":"\"PrimaryTemp\""},{"type":"html","content":"<span class='clj-string'>&quot;PrimingMethod&quot;</span>","value":"\"PrimingMethod\""},{"type":"html","content":"<span class='clj-string'>&quot;PrimingAmount&quot;</span>","value":"\"PrimingAmount\""}],"value":"[\"BeerID\" \"Name\" \"URL\" \"Style\" \"StyleID\" \"Size(L)\" \"OG\" \"FG\" \"ABV\" \"IBU\" \"Color\" \"BoilSize\" \"BoilTime\" \"BoilGravity\" \"Efficiency\" \"MashThickness\" \"SugarScale\" \"BrewMethod\" \"PitchRate\" \"PrimaryTemp\" \"PrimingMethod\" \"PrimingAmount\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;1&quot;</span>","value":"\"1\""},{"type":"html","content":"<span class='clj-string'>&quot;Vanilla Cream Ale&quot;</span>","value":"\"Vanilla Cream Ale\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/1633/vanilla-cream-ale&quot;</span>","value":"\"/homebrew/recipe/view/1633/vanilla-cream-ale\""},{"type":"html","content":"<span class='clj-string'>&quot;Cream Ale&quot;</span>","value":"\"Cream Ale\""},{"type":"html","content":"<span class='clj-string'>&quot;45&quot;</span>","value":"\"45\""},{"type":"html","content":"<span class='clj-string'>&quot;21.77&quot;</span>","value":"\"21.77\""},{"type":"html","content":"<span class='clj-string'>&quot;1.055&quot;</span>","value":"\"1.055\""},{"type":"html","content":"<span class='clj-string'>&quot;1.013&quot;</span>","value":"\"1.013\""},{"type":"html","content":"<span class='clj-string'>&quot;5.48&quot;</span>","value":"\"5.48\""},{"type":"html","content":"<span class='clj-string'>&quot;17.65&quot;</span>","value":"\"17.65\""},{"type":"html","content":"<span class='clj-string'>&quot;4.83&quot;</span>","value":"\"4.83\""},{"type":"html","content":"<span class='clj-string'>&quot;28.39&quot;</span>","value":"\"28.39\""},{"type":"html","content":"<span class='clj-string'>&quot;75&quot;</span>","value":"\"75\""},{"type":"html","content":"<span class='clj-string'>&quot;1.038&quot;</span>","value":"\"1.038\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;17.78&quot;</span>","value":"\"17.78\""},{"type":"html","content":"<span class='clj-string'>&quot;corn sugar&quot;</span>","value":"\"corn sugar\""},{"type":"html","content":"<span class='clj-string'>&quot;4.5 oz&quot;</span>","value":"\"4.5 oz\""}],"value":"[\"1\" \"Vanilla Cream Ale\" \"/homebrew/recipe/view/1633/vanilla-cream-ale\" \"Cream Ale\" \"45\" \"21.77\" \"1.055\" \"1.013\" \"5.48\" \"17.65\" \"4.83\" \"28.39\" \"75\" \"1.038\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"17.78\" \"corn sugar\" \"4.5 oz\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;2&quot;</span>","value":"\"2\""},{"type":"html","content":"<span class='clj-string'>&quot;Southern Tier Pumking clone&quot;</span>","value":"\"Southern Tier Pumking clone\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/16367/southern-tier-pumking-clone&quot;</span>","value":"\"/homebrew/recipe/view/16367/southern-tier-pumking-clone\""},{"type":"html","content":"<span class='clj-string'>&quot;Holiday/Winter Special Spiced Beer&quot;</span>","value":"\"Holiday/Winter Special Spiced Beer\""},{"type":"html","content":"<span class='clj-string'>&quot;85&quot;</span>","value":"\"85\""},{"type":"html","content":"<span class='clj-string'>&quot;20.82&quot;</span>","value":"\"20.82\""},{"type":"html","content":"<span class='clj-string'>&quot;1.083&quot;</span>","value":"\"1.083\""},{"type":"html","content":"<span class='clj-string'>&quot;1.021&quot;</span>","value":"\"1.021\""},{"type":"html","content":"<span class='clj-string'>&quot;8.16&quot;</span>","value":"\"8.16\""},{"type":"html","content":"<span class='clj-string'>&quot;60.65&quot;</span>","value":"\"60.65\""},{"type":"html","content":"<span class='clj-string'>&quot;15.64&quot;</span>","value":"\"15.64\""},{"type":"html","content":"<span class='clj-string'>&quot;24.61&quot;</span>","value":"\"24.61\""},{"type":"html","content":"<span class='clj-string'>&quot;60&quot;</span>","value":"\"60\""},{"type":"html","content":"<span class='clj-string'>&quot;1.07&quot;</span>","value":"\"1.07\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""}],"value":"[\"2\" \"Southern Tier Pumking clone\" \"/homebrew/recipe/view/16367/southern-tier-pumking-clone\" \"Holiday/Winter Special Spiced Beer\" \"85\" \"20.82\" \"1.083\" \"1.021\" \"8.16\" \"60.65\" \"15.64\" \"24.61\" \"60\" \"1.07\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;3&quot;</span>","value":"\"3\""},{"type":"html","content":"<span class='clj-string'>&quot;Zombie Dust Clone - EXTRACT&quot;</span>","value":"\"Zombie Dust Clone - EXTRACT\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/5920/zombie-dust-clone-extract&quot;</span>","value":"\"/homebrew/recipe/view/5920/zombie-dust-clone-extract\""},{"type":"html","content":"<span class='clj-string'>&quot;American IPA&quot;</span>","value":"\"American IPA\""},{"type":"html","content":"<span class='clj-string'>&quot;7&quot;</span>","value":"\"7\""},{"type":"html","content":"<span class='clj-string'>&quot;18.93&quot;</span>","value":"\"18.93\""},{"type":"html","content":"<span class='clj-string'>&quot;1.063&quot;</span>","value":"\"1.063\""},{"type":"html","content":"<span class='clj-string'>&quot;1.018&quot;</span>","value":"\"1.018\""},{"type":"html","content":"<span class='clj-string'>&quot;5.91&quot;</span>","value":"\"5.91\""},{"type":"html","content":"<span class='clj-string'>&quot;59.25&quot;</span>","value":"\"59.25\""},{"type":"html","content":"<span class='clj-string'>&quot;8.98&quot;</span>","value":"\"8.98\""},{"type":"html","content":"<span class='clj-string'>&quot;22.71&quot;</span>","value":"\"22.71\""},{"type":"html","content":"<span class='clj-string'>&quot;60&quot;</span>","value":"\"60\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;extract&quot;</span>","value":"\"extract\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""}],"value":"[\"3\" \"Zombie Dust Clone - EXTRACT\" \"/homebrew/recipe/view/5920/zombie-dust-clone-extract\" \"American IPA\" \"7\" \"18.93\" \"1.063\" \"1.018\" \"5.91\" \"59.25\" \"8.98\" \"22.71\" \"60\" \"N/A\" \"70\" \"N/A\" \"Specific Gravity\" \"extract\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;4&quot;</span>","value":"\"4\""},{"type":"html","content":"<span class='clj-string'>&quot;Zombie Dust Clone - ALL GRAIN&quot;</span>","value":"\"Zombie Dust Clone - ALL GRAIN\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/5916/zombie-dust-clone-all-grain&quot;</span>","value":"\"/homebrew/recipe/view/5916/zombie-dust-clone-all-grain\""},{"type":"html","content":"<span class='clj-string'>&quot;American IPA&quot;</span>","value":"\"American IPA\""},{"type":"html","content":"<span class='clj-string'>&quot;7&quot;</span>","value":"\"7\""},{"type":"html","content":"<span class='clj-string'>&quot;22.71&quot;</span>","value":"\"22.71\""},{"type":"html","content":"<span class='clj-string'>&quot;1.061&quot;</span>","value":"\"1.061\""},{"type":"html","content":"<span class='clj-string'>&quot;1.017&quot;</span>","value":"\"1.017\""},{"type":"html","content":"<span class='clj-string'>&quot;5.8&quot;</span>","value":"\"5.8\""},{"type":"html","content":"<span class='clj-string'>&quot;54.48&quot;</span>","value":"\"54.48\""},{"type":"html","content":"<span class='clj-string'>&quot;8.5&quot;</span>","value":"\"8.5\""},{"type":"html","content":"<span class='clj-string'>&quot;26.5&quot;</span>","value":"\"26.5\""},{"type":"html","content":"<span class='clj-string'>&quot;60&quot;</span>","value":"\"60\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""}],"value":"[\"4\" \"Zombie Dust Clone - ALL GRAIN\" \"/homebrew/recipe/view/5916/zombie-dust-clone-all-grain\" \"American IPA\" \"7\" \"22.71\" \"1.061\" \"1.017\" \"5.8\" \"54.48\" \"8.5\" \"26.5\" \"60\" \"N/A\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;5&quot;</span>","value":"\"5\""},{"type":"html","content":"<span class='clj-string'>&quot;Bakke Brygg Belgisk Blonde 50 l&quot;</span>","value":"\"Bakke Brygg Belgisk Blonde 50 l\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/89534/bakke-brygg-belgisk-blonde-50-l&quot;</span>","value":"\"/homebrew/recipe/view/89534/bakke-brygg-belgisk-blonde-50-l\""},{"type":"html","content":"<span class='clj-string'>&quot;Belgian Blond Ale&quot;</span>","value":"\"Belgian Blond Ale\""},{"type":"html","content":"<span class='clj-string'>&quot;20&quot;</span>","value":"\"20\""},{"type":"html","content":"<span class='clj-string'>&quot;50&quot;</span>","value":"\"50\""},{"type":"html","content":"<span class='clj-string'>&quot;1.06&quot;</span>","value":"\"1.06\""},{"type":"html","content":"<span class='clj-string'>&quot;1.01&quot;</span>","value":"\"1.01\""},{"type":"html","content":"<span class='clj-string'>&quot;6.48&quot;</span>","value":"\"6.48\""},{"type":"html","content":"<span class='clj-string'>&quot;17.84&quot;</span>","value":"\"17.84\""},{"type":"html","content":"<span class='clj-string'>&quot;4.57&quot;</span>","value":"\"4.57\""},{"type":"html","content":"<span class='clj-string'>&quot;60&quot;</span>","value":"\"60\""},{"type":"html","content":"<span class='clj-string'>&quot;90&quot;</span>","value":"\"90\""},{"type":"html","content":"<span class='clj-string'>&quot;1.05&quot;</span>","value":"\"1.05\""},{"type":"html","content":"<span class='clj-string'>&quot;72&quot;</span>","value":"\"72\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;19&quot;</span>","value":"\"19\""},{"type":"html","content":"<span class='clj-string'>&quot;Sukkerlake&quot;</span>","value":"\"Sukkerlake\""},{"type":"html","content":"<span class='clj-string'>&quot;6-7 g sukker/l&quot;</span>","value":"\"6-7 g sukker/l\""}],"value":"[\"5\" \"Bakke Brygg Belgisk Blonde 50 l\" \"/homebrew/recipe/view/89534/bakke-brygg-belgisk-blonde-50-l\" \"Belgian Blond Ale\" \"20\" \"50\" \"1.06\" \"1.01\" \"6.48\" \"17.84\" \"4.57\" \"60\" \"90\" \"1.05\" \"72\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"19\" \"Sukkerlake\" \"6-7 g sukker/l\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;6&quot;</span>","value":"\"6\""},{"type":"html","content":"<span class='clj-string'>&quot;Sierra Nevada Pale Ale Clone&quot;</span>","value":"\"Sierra Nevada Pale Ale Clone\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/28546/sierra-nevada-pale-ale-clone&quot;</span>","value":"\"/homebrew/recipe/view/28546/sierra-nevada-pale-ale-clone\""},{"type":"html","content":"<span class='clj-string'>&quot;American Pale Ale&quot;</span>","value":"\"American Pale Ale\""},{"type":"html","content":"<span class='clj-string'>&quot;10&quot;</span>","value":"\"10\""},{"type":"html","content":"<span class='clj-string'>&quot;24.61&quot;</span>","value":"\"24.61\""},{"type":"html","content":"<span class='clj-string'>&quot;1.055&quot;</span>","value":"\"1.055\""},{"type":"html","content":"<span class='clj-string'>&quot;1.013&quot;</span>","value":"\"1.013\""},{"type":"html","content":"<span class='clj-string'>&quot;5.58&quot;</span>","value":"\"5.58\""},{"type":"html","content":"<span class='clj-string'>&quot;40.12&quot;</span>","value":"\"40.12\""},{"type":"html","content":"<span class='clj-string'>&quot;8&quot;</span>","value":"\"8\""},{"type":"html","content":"<span class='clj-string'>&quot;29.34&quot;</span>","value":"\"29.34\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;1.047&quot;</span>","value":"\"1.047\""},{"type":"html","content":"<span class='clj-string'>&quot;79&quot;</span>","value":"\"79\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;1&quot;</span>","value":"\"1\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""}],"value":"[\"6\" \"Sierra Nevada Pale Ale Clone\" \"/homebrew/recipe/view/28546/sierra-nevada-pale-ale-clone\" \"American Pale Ale\" \"10\" \"24.61\" \"1.055\" \"1.013\" \"5.58\" \"40.12\" \"8\" \"29.34\" \"70\" \"1.047\" \"79\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"1\" \"N/A\" \"N/A\" \"N/A\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;7&quot;</span>","value":"\"7\""},{"type":"html","content":"<span class='clj-string'>&quot;Russian River Pliny the Elder (original)&quot;</span>","value":"\"Russian River Pliny the Elder (original)\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/37534/russian-river-pliny-the-elder-original-&quot;</span>","value":"\"/homebrew/recipe/view/37534/russian-river-pliny-the-elder-original-\""},{"type":"html","content":"<span class='clj-string'>&quot;Imperial IPA&quot;</span>","value":"\"Imperial IPA\""},{"type":"html","content":"<span class='clj-string'>&quot;86&quot;</span>","value":"\"86\""},{"type":"html","content":"<span class='clj-string'>&quot;22.71&quot;</span>","value":"\"22.71\""},{"type":"html","content":"<span class='clj-string'>&quot;1.072&quot;</span>","value":"\"1.072\""},{"type":"html","content":"<span class='clj-string'>&quot;1.018&quot;</span>","value":"\"1.018\""},{"type":"html","content":"<span class='clj-string'>&quot;7.09&quot;</span>","value":"\"7.09\""},{"type":"html","content":"<span class='clj-string'>&quot;268.71&quot;</span>","value":"\"268.71\""},{"type":"html","content":"<span class='clj-string'>&quot;6.33&quot;</span>","value":"\"6.33\""},{"type":"html","content":"<span class='clj-string'>&quot;30.28&quot;</span>","value":"\"30.28\""},{"type":"html","content":"<span class='clj-string'>&quot;90&quot;</span>","value":"\"90\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;75&quot;</span>","value":"\"75\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""}],"value":"[\"7\" \"Russian River Pliny the Elder (original)\" \"/homebrew/recipe/view/37534/russian-river-pliny-the-elder-original-\" \"Imperial IPA\" \"86\" \"22.71\" \"1.072\" \"1.018\" \"7.09\" \"268.71\" \"6.33\" \"30.28\" \"90\" \"N/A\" \"75\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;8&quot;</span>","value":"\"8\""},{"type":"html","content":"<span class='clj-string'>&quot;Spotted Clown (New Glarus Spotted Cow clone)&quot;</span>","value":"\"Spotted Clown (New Glarus Spotted Cow clone)\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/672/spotted-clown-new-glarus-spotted-cow-clone-&quot;</span>","value":"\"/homebrew/recipe/view/672/spotted-clown-new-glarus-spotted-cow-clone-\""},{"type":"html","content":"<span class='clj-string'>&quot;Cream Ale&quot;</span>","value":"\"Cream Ale\""},{"type":"html","content":"<span class='clj-string'>&quot;45&quot;</span>","value":"\"45\""},{"type":"html","content":"<span class='clj-string'>&quot;20.82&quot;</span>","value":"\"20.82\""},{"type":"html","content":"<span class='clj-string'>&quot;1.054&quot;</span>","value":"\"1.054\""},{"type":"html","content":"<span class='clj-string'>&quot;1.014&quot;</span>","value":"\"1.014\""},{"type":"html","content":"<span class='clj-string'>&quot;5.36&quot;</span>","value":"\"5.36\""},{"type":"html","content":"<span class='clj-string'>&quot;19.97&quot;</span>","value":"\"19.97\""},{"type":"html","content":"<span class='clj-string'>&quot;5.94&quot;</span>","value":"\"5.94\""},{"type":"html","content":"<span class='clj-string'>&quot;28.39&quot;</span>","value":"\"28.39\""},{"type":"html","content":"<span class='clj-string'>&quot;75&quot;</span>","value":"\"75\""},{"type":"html","content":"<span class='clj-string'>&quot;1.04&quot;</span>","value":"\"1.04\""},{"type":"html","content":"<span class='clj-string'>&quot;70&quot;</span>","value":"\"70\""},{"type":"html","content":"<span class='clj-string'>&quot;1.4&quot;</span>","value":"\"1.4\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;corn sugar&quot;</span>","value":"\"corn sugar\""},{"type":"html","content":"<span class='clj-string'>&quot;4.2 oz&quot;</span>","value":"\"4.2 oz\""}],"value":"[\"8\" \"Spotted Clown (New Glarus Spotted Cow clone)\" \"/homebrew/recipe/view/672/spotted-clown-new-glarus-spotted-cow-clone-\" \"Cream Ale\" \"45\" \"20.82\" \"1.054\" \"1.014\" \"5.36\" \"19.97\" \"5.94\" \"28.39\" \"75\" \"1.04\" \"70\" \"1.4\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"corn sugar\" \"4.2 oz\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;9&quot;</span>","value":"\"9\""},{"type":"html","content":"<span class='clj-string'>&quot;Chocolate Vanilla Porter&quot;</span>","value":"\"Chocolate Vanilla Porter\""},{"type":"html","content":"<span class='clj-string'>&quot;/homebrew/recipe/view/29265/chocolate-vanilla-porter&quot;</span>","value":"\"/homebrew/recipe/view/29265/chocolate-vanilla-porter\""},{"type":"html","content":"<span class='clj-string'>&quot;Robust Porter&quot;</span>","value":"\"Robust Porter\""},{"type":"html","content":"<span class='clj-string'>&quot;129&quot;</span>","value":"\"129\""},{"type":"html","content":"<span class='clj-string'>&quot;22.71&quot;</span>","value":"\"22.71\""},{"type":"html","content":"<span class='clj-string'>&quot;1.06&quot;</span>","value":"\"1.06\""},{"type":"html","content":"<span class='clj-string'>&quot;1.016&quot;</span>","value":"\"1.016\""},{"type":"html","content":"<span class='clj-string'>&quot;5.77&quot;</span>","value":"\"5.77\""},{"type":"html","content":"<span class='clj-string'>&quot;31.63&quot;</span>","value":"\"31.63\""},{"type":"html","content":"<span class='clj-string'>&quot;34.76&quot;</span>","value":"\"34.76\""},{"type":"html","content":"<span class='clj-string'>&quot;30.28&quot;</span>","value":"\"30.28\""},{"type":"html","content":"<span class='clj-string'>&quot;75&quot;</span>","value":"\"75\""},{"type":"html","content":"<span class='clj-string'>&quot;1.042&quot;</span>","value":"\"1.042\""},{"type":"html","content":"<span class='clj-string'>&quot;73&quot;</span>","value":"\"73\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-string'>&quot;All Grain&quot;</span>","value":"\"All Grain\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;N/A&quot;</span>","value":"\"N/A\""},{"type":"html","content":"<span class='clj-string'>&quot;corn sugar&quot;</span>","value":"\"corn sugar\""},{"type":"html","content":"<span class='clj-string'>&quot;4 oz&quot;</span>","value":"\"4 oz\""}],"value":"[\"9\" \"Chocolate Vanilla Porter\" \"/homebrew/recipe/view/29265/chocolate-vanilla-porter\" \"Robust Porter\" \"129\" \"22.71\" \"1.06\" \"1.016\" \"5.77\" \"31.63\" \"34.76\" \"30.28\" \"75\" \"1.042\" \"73\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"corn sugar\" \"4 oz\"]"}],"value":"#gorilla_repl.table.TableView{:contents ([\"BeerID\" \"Name\" \"URL\" \"Style\" \"StyleID\" \"Size(L)\" \"OG\" \"FG\" \"ABV\" \"IBU\" \"Color\" \"BoilSize\" \"BoilTime\" \"BoilGravity\" \"Efficiency\" \"MashThickness\" \"SugarScale\" \"BrewMethod\" \"PitchRate\" \"PrimaryTemp\" \"PrimingMethod\" \"PrimingAmount\"] [\"1\" \"Vanilla Cream Ale\" \"/homebrew/recipe/view/1633/vanilla-cream-ale\" \"Cream Ale\" \"45\" \"21.77\" \"1.055\" \"1.013\" \"5.48\" \"17.65\" \"4.83\" \"28.39\" \"75\" \"1.038\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"17.78\" \"corn sugar\" \"4.5 oz\"] [\"2\" \"Southern Tier Pumking clone\" \"/homebrew/recipe/view/16367/southern-tier-pumking-clone\" \"Holiday/Winter Special Spiced Beer\" \"85\" \"20.82\" \"1.083\" \"1.021\" \"8.16\" \"60.65\" \"15.64\" \"24.61\" \"60\" \"1.07\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"] [\"3\" \"Zombie Dust Clone - EXTRACT\" \"/homebrew/recipe/view/5920/zombie-dust-clone-extract\" \"American IPA\" \"7\" \"18.93\" \"1.063\" \"1.018\" \"5.91\" \"59.25\" \"8.98\" \"22.71\" \"60\" \"N/A\" \"70\" \"N/A\" \"Specific Gravity\" \"extract\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"] [\"4\" \"Zombie Dust Clone - ALL GRAIN\" \"/homebrew/recipe/view/5916/zombie-dust-clone-all-grain\" \"American IPA\" \"7\" \"22.71\" \"1.061\" \"1.017\" \"5.8\" \"54.48\" \"8.5\" \"26.5\" \"60\" \"N/A\" \"70\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"] [\"5\" \"Bakke Brygg Belgisk Blonde 50 l\" \"/homebrew/recipe/view/89534/bakke-brygg-belgisk-blonde-50-l\" \"Belgian Blond Ale\" \"20\" \"50\" \"1.06\" \"1.01\" \"6.48\" \"17.84\" \"4.57\" \"60\" \"90\" \"1.05\" \"72\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"19\" \"Sukkerlake\" \"6-7 g sukker/l\"] [\"6\" \"Sierra Nevada Pale Ale Clone\" \"/homebrew/recipe/view/28546/sierra-nevada-pale-ale-clone\" \"American Pale Ale\" \"10\" \"24.61\" \"1.055\" \"1.013\" \"5.58\" \"40.12\" \"8\" \"29.34\" \"70\" \"1.047\" \"79\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"1\" \"N/A\" \"N/A\" \"N/A\"] [\"7\" \"Russian River Pliny the Elder (original)\" \"/homebrew/recipe/view/37534/russian-river-pliny-the-elder-original-\" \"Imperial IPA\" \"86\" \"22.71\" \"1.072\" \"1.018\" \"7.09\" \"268.71\" \"6.33\" \"30.28\" \"90\" \"N/A\" \"75\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"N/A\" \"N/A\"] [\"8\" \"Spotted Clown (New Glarus Spotted Cow clone)\" \"/homebrew/recipe/view/672/spotted-clown-new-glarus-spotted-cow-clone-\" \"Cream Ale\" \"45\" \"20.82\" \"1.054\" \"1.014\" \"5.36\" \"19.97\" \"5.94\" \"28.39\" \"75\" \"1.04\" \"70\" \"1.4\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"corn sugar\" \"4.2 oz\"] [\"9\" \"Chocolate Vanilla Porter\" \"/homebrew/recipe/view/29265/chocolate-vanilla-porter\" \"Robust Porter\" \"129\" \"22.71\" \"1.06\" \"1.016\" \"5.77\" \"31.63\" \"34.76\" \"30.28\" \"75\" \"1.042\" \"73\" \"N/A\" \"Specific Gravity\" \"All Grain\" \"N/A\" \"N/A\" \"corn sugar\" \"4 oz\"]), :opts nil}"}
;; <=

;; **
;;; In order to uniform OG and FG cols based on SugarScale, let's check the most used type
;; **

;; @@
(an/col-frequencies 16)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Specific Gravity&quot;</span>","value":"\"Specific Gravity\""},{"type":"html","content":"<span class='clj-long'>71959</span>","value":"71959"}],"value":"[\"Specific Gravity\" 71959]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;Plato&quot;</span>","value":"\"Plato\""},{"type":"html","content":"<span class='clj-long'>1902</span>","value":"1902"}],"value":"[\"Plato\" 1902]"}],"value":"{\"Specific Gravity\" 71959, \"Plato\" 1902}"}
;; <=

;; **
;;; Now let's convert Plato's value into Specific Gravity:
;;; 
;;; formula: SG = 1+ (plato / (258.6 – ( (plato/258.2) *227.1) ) )
;; **

;; @@
  (t/table-view ((an/with-csv an/recipe-file) 
	 	  (fn [rows] (->> rows
                   rest
                   (take 500)
                   (filter #(= "Plato" (nth % 16)))
                   (map #(list (nth % 8) (nth % 7)))
                   doall))) :columns ["OG" "FG"])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-string'>&quot;OG&quot;</span>","value":"\"OG\""},{"type":"html","content":"<span class='clj-string'>&quot;FG&quot;</span>","value":"\"FG\""}],"value":"[\"OG\" \"FG\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;5.65&quot;</span>","value":"\"5.65\""},{"type":"html","content":"<span class='clj-string'>&quot;3.4853&quot;</span>","value":"\"3.4853\""}],"value":"(\"5.65\" \"3.4853\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;6.11&quot;</span>","value":"\"6.11\""},{"type":"html","content":"<span class='clj-string'>&quot;3.75321&quot;</span>","value":"\"3.75321\""}],"value":"(\"6.11\" \"3.75321\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;5.15&quot;</span>","value":"\"5.15\""},{"type":"html","content":"<span class='clj-string'>&quot;3.61072&quot;</span>","value":"\"3.61072\""}],"value":"(\"5.15\" \"3.61072\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;6.7&quot;</span>","value":"\"6.7\""},{"type":"html","content":"<span class='clj-string'>&quot;4.33412&quot;</span>","value":"\"4.33412\""}],"value":"(\"6.7\" \"4.33412\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;5.94&quot;</span>","value":"\"5.94\""},{"type":"html","content":"<span class='clj-string'>&quot;4.48111&quot;</span>","value":"\"4.48111\""}],"value":"(\"5.94\" \"4.48111\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;5.57&quot;</span>","value":"\"5.57\""},{"type":"html","content":"<span class='clj-string'>&quot;3.10738&quot;</span>","value":"\"3.10738\""}],"value":"(\"5.57\" \"3.10738\")"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-string'>&quot;10.05&quot;</span>","value":"\"10.05\""},{"type":"html","content":"<span class='clj-string'>&quot;5.83082&quot;</span>","value":"\"5.83082\""}],"value":"(\"10.05\" \"5.83082\")"}],"value":"#gorilla_repl.table.TableView{:contents ((\"5.65\" \"3.4853\") (\"6.11\" \"3.75321\") (\"5.15\" \"3.61072\") (\"6.7\" \"4.33412\") (\"5.94\" \"4.48111\") (\"5.57\" \"3.10738\") (\"10.05\" \"5.83082\")), :opts (:columns [\"OG\" \"FG\"])}"}
;; <=

;; **
;;; Converted value for check // see https://www.brewersfriend.com/plato-to-sg-conversion-chart/
;; **

;; @@
(t/table-view ((an/with-csv an/recipe-file) 
	 	  (fn [rows] (->> rows
                   rest
                   (take 500)
                   (filter #(= "Plato" (nth % 16)))
                   (map an/row-to-sg)
                   (map #(list (nth % 8) (nth % 7)))
                   doall))) :columns ["OG" "FG"])
;; @@
;; =>
;;; {"type":"list-like","open":"<center><table>","close":"</table></center>","separator":"\n","items":[{"type":"list-like","open":"<tr><th>","close":"</th></tr>","separator":"</th><th>","items":[{"type":"html","content":"<span class='clj-string'>&quot;OG&quot;</span>","value":"\"OG\""},{"type":"html","content":"<span class='clj-string'>&quot;FG&quot;</span>","value":"\"FG\""}],"value":"[\"OG\" \"FG\"]"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.022</span>","value":"1.022"},{"type":"html","content":"<span class='clj-double'>1.014</span>","value":"1.014"}],"value":"(1.022 1.014)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.024</span>","value":"1.024"},{"type":"html","content":"<span class='clj-double'>1.015</span>","value":"1.015"}],"value":"(1.024 1.015)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.02</span>","value":"1.02"},{"type":"html","content":"<span class='clj-double'>1.014</span>","value":"1.014"}],"value":"(1.02 1.014)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.027</span>","value":"1.027"},{"type":"html","content":"<span class='clj-double'>1.017</span>","value":"1.017"}],"value":"(1.027 1.017)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.023</span>","value":"1.023"},{"type":"html","content":"<span class='clj-double'>1.018</span>","value":"1.018"}],"value":"(1.023 1.018)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.022</span>","value":"1.022"},{"type":"html","content":"<span class='clj-double'>1.012</span>","value":"1.012"}],"value":"(1.022 1.012)"},{"type":"list-like","open":"<tr><td>","close":"</td></tr>","separator":"</td><td>","items":[{"type":"html","content":"<span class='clj-double'>1.04</span>","value":"1.04"},{"type":"html","content":"<span class='clj-double'>1.023</span>","value":"1.023"}],"value":"(1.04 1.023)"}],"value":"#gorilla_repl.table.TableView{:contents ((1.022 1.014) (1.024 1.015) (1.02 1.014) (1.027 1.017) (1.023 1.018) (1.022 1.012) (1.04 1.023)), :opts (:columns [\"OG\" \"FG\"])}"}
;; <=

;; @@

;; @@
